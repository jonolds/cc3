#!/bin/bash
tarname="pa3_olds"
mainclass="WordCount"


# rm $tarname.tar
# rm -R $tarname
# COPY EVERYTHING TO TOP LEVEL


mkdir $tarname
cp src/main/java/*.java answer.txt -r input ./$tarname
# cp src/main/java/*.java ./$tarname

# TEST - compile / put in jar / delete .class / run
# javac *.java -Xlint:deprecation -d ./
javac $tarname/*.java -Xlint:deprecation -d $tarname
# jar -cvf TestJar.jar ./*.class
jar -cvf $tarname/TestJar.jar *.class
# rm ./*.class
# rm $tarname/*.class
# hadoop jar TestJar.jar $mainclass input output
# cat ./output/part-r-00000

# CREATE TAR / DELETE .java / DELETE jar
# tar -cvf $tarname.tar input output *.java answer.txt
cd $tarname
hadoop jar TestJar.jar $mainclass input output
# cat ./output/part-r-00000
# rm TestJar.jar *.class

tar -cvf ../$tarname.tar *.java answer.txt input output
cd ..
# rm ./*.java
# rm $tarname/*.jarf
# rm TestJar.jar